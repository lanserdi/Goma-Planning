(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.airglass=b():a.airglass=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){'use strict';a.exports=c(1)},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0}),b.Planning=void 0;var e=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(2),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=c(4),i=b.Planning=function(){function a(){d(this,a),this.ANIMATION_DURATION__LOADING=500;var b=document.createElement('style');b.setAttribute('rel','stylesheet'),b.setAttribute('type','text/css'),b.styleSheet?b.styleSheet.cssText=g.default.toString():b.innerHTML=g.default.toString(),document.getElementsByTagName('head')[0].appendChild(b)}return e(a,[{key:'runApp',value:function(a){this.stopApp(),this.eleWrap=a,this.eleWrap.classList.add('planing-module'),this.createNavBar(),this.createTaskListWrap(),this.createAddTaskComponent()}},{key:'stopApp',value:function(){this.eleWrap&&(this.eleWrap.innerHTML='',this.eleWrap.classList.remove('planing-module'),this.eleWrap=null,this.eleTaskListWrap=null,this.eleTaskList=null,this.eleLoading=null,this.eleAddTaskWrap=null,this.addTaskInputWrap=null,this.eleTaskInput=null,this.eleSendTask=null,this.eleNavBarWrap=null)}},{key:'createNavBar',value:function(){var a=this;this.eleNavBarWrap=document.createElement('div'),this.eleNavBarWrap.classList.add('navbar-wrap'),this.eleWrap.appendChild(this.eleNavBarWrap),this.eleNavBarWrap.addEventListener('mouseover',this.onMouseOverNavbar,!1),this.eleNavBarWrap.addEventListener('mouseleave',this.onMouseLeaveNavbar,!1),this.eleNavBarWrap.addEventListener('click',function(b){a.onMouseClickNavbar(this,b)},!1);for(var b,c=[{isActive:!0,name:'\u8BA1\u5212',color:'hsl(281, 90%, 50%)',feat:'JIHUA'},{isActive:!1,name:'\u82B1\u5F00',color:'hsl(231, 92%, 43%)',feat:'HUAKAI'},{isActive:!1,name:'\u5C18\u5C01',color:'hsl(24, 91%, 46%)',feat:'CHENFENG'}],d='',e=(100/c.length).toFixed(2),f=void 0,g=void 0,h=0;h<c.length;h++)b=c[h],b.isActive&&(f=b.color,g=e*h,this.eleWrap.dataset.feat=b.feat,this.renderTasksByTag(b.feat)),d+='<div data-type="btn" data-feat="'+b.feat+'" data-p="'+e*h+'%" data-c="'+b.color+'" data-state="'+(b.isActive?'on':'off')+'" class="tag-btn'+(b.isActive?' active':'')+'" style="width:'+e+'%;"><span class="tag-name" style="color:'+b.color+';">'+b.name+'</span></div>';d+='<div id="planning_navbar_pointer" style="background-color:'+f+'; left:'+g+'%;"></div>',this.eleNavBarWrap.innerHTML=d}},{key:'onMouseOverNavbar',value:function(a){var b=a.target,d=b.dataset.type;if(d&&'btn'==d){var e=b.dataset.p,f=b.dataset.c,c=this;c.querySelector('#planning_navbar_pointer').style.left=e,c.querySelector('#planning_navbar_pointer').style.backgroundColor=f}}},{key:'onMouseLeaveNavbar',value:function(){var a=this,b=a.querySelector('.active'),d=b.dataset.p,e=b.dataset.c;a.querySelector('#planning_navbar_pointer').style.left=d,a.querySelector('#planning_navbar_pointer').style.backgroundColor=e}},{key:'onMouseClickNavbar',value:function(a,b){for(var c,d=b.target;d!==a;){if(c=d.dataset.type,'btn'==c){var e=a.querySelector('.active'),f=d.dataset.feat;e.dataset.state='off',e.classList.remove('active'),d.dataset.state='on',d.classList.add('active'),a.parentNode.dataset.feat=f,this.renderTasksByTag(f)}d=d.parentNode}}},{key:'renderTasksByTag',value:function(a){var b=this;this.showLoading();var c=new XMLHttpRequest;c.responseType='json',c.onreadystatechange=function(){if(200==c.status&&4==c.readyState){var d=c.response;if(d.flag){for(var e,f='',g=0;g<d.result.length;g++)e=d.result[g],f+=b.getTaskItemTemplate(a,e.id,e.title,e.create_timestamp,g);b.eleTaskList.innerHTML=f,f=null}d=null,c.onreadystatechange=null,c=null,b.destroyLoading()}},c.open('GET','/api/get_task?q='+a,!0),c.send(null)}},{key:'createTaskListWrap',value:function(){var a=this;this.eleTaskListWrap=document.createElement('div'),this.eleTaskListWrap.classList.add('task-list-wrap'),this.eleWrap.appendChild(this.eleTaskListWrap),this.eleTaskListWrap.addEventListener('click',function(b){a.onClickTaskListWrap(this,b)},!1),this.eleTaskList=document.createElement('div'),this.eleTaskList.classList.add('task-list'),this.eleTaskListWrap.appendChild(this.eleTaskList)}},{key:'onClickTaskListWrap',value:function(a,b){var c=b.target,d=c.dataset.type,e=c.dataset.feat,f=c.dataset.taskId;if(d&&'btn'==d&&e&&f)switch(e){case'JIHUA':this.taskGoHUAKAI(f,c);break;case'HUAKAI':break;case'CHENFENG':this.taskGoJIHUA(f,c);}}},{key:'taskGoHUAKAI',value:function(a,b){var c=b.parentNode.parentNode,d=new XMLHttpRequest;d.responseType='json',d.onreadystatechange=function(){if(200==d.status&&4==d.readyState){var a=d.response;if(!a.flag)return;c.parentNode.removeChild(c)}},d.open('PUT','/api/update_task/'+a+'/go_huakai',!0),d.send()}},{key:'taskGoJIHUA',value:function(a,b){var c=b.parentNode.parentNode,d=new XMLHttpRequest;d.responseType='json',d.onreadystatechange=function(){if(200==d.status&&4==d.readyState){var a=d.response;if(!a.flag)return;c.parentNode.removeChild(c)}},d.open('PUT','/api/update_task/'+a+'/go_jihua',!0),d.send()}},{key:'appendNewTaskToTaskList',value:function(a,b,c){var d=document.createElement('div');d.innerHTML=this.getTaskItemTemplate(a,b,c),this.eleTaskList.insertBefore(d,document.querySelector('.task-list').querySelector('div'))}},{key:'getTaskItemTemplate',value:function(a,b,c,d,e){e=e||0,d=+d;var f=new Date(d),g=new Date(new Date().getTime()-d),i=g.getUTCDate()-1,j='';return'JIHUA'==a&&(i?j='\xB7'+i+'\u5929<':j=h.dealDateNumber(g.getUTCHours())+':'+h.dealDateNumber(g.getUTCMinutes())),'<div data-feat="'+a+'"><div class="task-item-wrap" data-id="'+b+'" style="animation-delay: '+50*e+'ms"><div class="check-box" data-type="btn" data-task-id="'+b+'" data-feat="'+a+'"></div><p class="title">'+c+'</p><span class="date">'+j+'</span></div></div>'}},{key:'createAddTaskComponent',value:function(){var a=this;this.eleAddTaskWrap=document.createElement('div'),this.eleAddTaskWrap.classList.add('add-task-wrap'),this.eleWrap.appendChild(this.eleAddTaskWrap),this.addTaskInputWrap=document.createElement('div'),this.addTaskInputWrap.classList.add('add-task-input-wrap'),this.eleAddTaskWrap.appendChild(this.addTaskInputWrap),this.eleTaskInput=document.createElement('input'),this.eleTaskInput.classList.add('add-task-input'),this.eleTaskInput.setAttribute('placeholder','\u521B\u5EFA\u65B0\u7684\u8BA1\u5212'),this.addTaskInputWrap.appendChild(this.eleTaskInput),this.eleTaskInput.focus(),this.eleSendTask=document.createElement('div'),this.eleSendTask.classList.add('send-task'),this.addTaskInputWrap.appendChild(this.eleSendTask),this.eleSendTask.addEventListener('click',function(b){a.onClickSendTask(b)},!1)}},{key:'onClickSendTask',value:function(){this.showLoading();var a=this.eleTaskInput.value.replace(/^\s+|\s$/g,'');return this.eleTaskInput.value='',!a||4>a.length||24<=a.length?(this.eleTaskInput.focus(),void this.destroyLoading()):void this.sendTask(a)}},{key:'sendTask',value:function(a){var b=this,c=new XMLHttpRequest,d=new FormData;c.responseType='json',c.onreadystatechange=function(){if(200==c.status&&4==c.readyState){var a=c.response;if(a.flag){var d=a.result.title,e=a.result.title,f=a.result.create_timestamp;b.appendNewTaskToTaskList(d,e,f)}a=null,c.onreadystatechange=null,c=null,b.destroyLoading()}},d.append('task_title',a),c.open('POST','/api/add_task/',!0),c.send(d),d=null}},{key:'createLoadingComponent',value:function(){for(var a=document.createElement('div'),b='',c=['#f44336','#f9a825','#5abd5e','#29b6f6'],d=0;d<4;d++)b+='<span class="loading-dot" style="animation: loading-dot 870ms '+d*100+'ms cubic-bezier(.21,.02,.78,.98) infinite; background-color: '+c[d]+'; margin-left: '+(d-2)*14+'px;"></span>';return a.classList.add('loading-wrap'),a.innerHTML=b,a}},{key:'showLoading',value:function(){var a=this.ANIMATION_DURATION__LOADING;this.eleLoading=this.createLoadingComponent(),this.eleLoading.style.transitionDelay=a+'ms',this.eleLoading.dataset.visibility='visible',this.eleWrap.appendChild(this.eleLoading)}},{key:'destroyLoading',value:function(){var a=this;if(this.eleLoading){var b=setTimeout(function(){a.eleLoading&&a.eleLoading.parentNode.removeChild(a.eleLoading),a.eleLoading=null,clearTimeout(b),b=null},2*this.ANIMATION_DURATION__LOADING);this.eleLoading.dataset.visibility='hidden'}}}]),a}()},function(a,b,c){b=a.exports=c(3)(!1),b.push([a.i,'.planing-module{position:relative;width:260px;height:360px;border-radius:2px;background-color:#fff;box-shadow:1px 1px 15px rgba(0,0,0,.1);transform-origin:100% 0;animation:show-planning-module .34s forwards;font-size:16px;overflow:hidden}.planing-module[data-feat=JIHUA] .task-list-wrap{padding-bottom:2.5em}.planing-module[data-feat=JIHUA] .task-list-wrap .task-item-wrap{padding-right:3.5em}.planing-module[data-feat=JIHUA] .task-list-wrap .check-box{border:2px solid #aa0df2}.planing-module[data-feat=JIHUA] .add-task-wrap{bottom:0}.planing-module[data-feat=HUAKAI] .task-list-wrap{padding-bottom:0}.planing-module[data-feat=HUAKAI] .task-list-wrap .task-item-wrap{padding-right:.5em}.planing-module[data-feat=HUAKAI] .task-list-wrap .check-box{border:2px solid #0927d3}.planing-module[data-feat=HUAKAI] .task-list-wrap .check-box:after,.planing-module[data-feat=HUAKAI] .task-list-wrap .check-box:before{position:absolute;top:50%;left:50%;height:2px;margin-top:-1px;background-color:#0927d3;content:""}.planing-module[data-feat=HUAKAI] .task-list-wrap .check-box:before{width:2px;margin-left:-3px;transform:rotate(45deg)}.planing-module[data-feat=HUAKAI] .task-list-wrap .check-box:after{width:6px;margin-left:-2px;transform:rotate(-45deg)}.planing-module[data-feat=HUAKAI] .add-task-wrap{bottom:-40px}.planing-module[data-feat=CHENFENG] .task-list-wrap{padding-bottom:0}.planing-module[data-feat=CHENFENG] .task-list-wrap .task-item-wrap{padding-right:.5em}.planing-module[data-feat=CHENFENG] .task-list-wrap .check-box{border:2px solid #e0600b}.planing-module[data-feat=CHENFENG] .task-list-wrap .check-box:after,.planing-module[data-feat=CHENFENG] .task-list-wrap .check-box:before{position:absolute;top:50%;left:50%;width:7px;height:2px;margin-top:-1px;margin-left:-3px;background-color:#e0600b;content:""}.planing-module[data-feat=CHENFENG] .task-list-wrap .check-box:before{transform:rotate(45deg)}.planing-module[data-feat=CHENFENG] .task-list-wrap .check-box:after{transform:rotate(-45deg)}.planing-module[data-feat=CHENFENG] .add-task-wrap{bottom:-40px}.planing-module .navbar-wrap{position:absolute;top:0;left:0;width:100%;z-index:1}.planing-module .navbar-wrap .tag-btn{position:relative;float:left;height:45px;line-height:42px;text-align:center;font-size:1em;color:#888;overflow:hidden}.planing-module .navbar-wrap .tag-btn:hover{cursor:pointer}.planing-module .navbar-wrap .tag-btn .tag-name{opacity:.8;transition:all .23ms}.planing-module .navbar-wrap .tag-btn.active .tag-name{opacity:1}.planing-module .navbar-wrap:after{clear:both;display:block;content:""}.planing-module .navbar-wrap #planning_navbar_pointer{position:absolute;bottom:0;left:0;width:33.33%;height:2px;border-radius:10px;transition:all .23s}.planing-module .task-list-wrap{position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;box-sizing:border-box;overflow:hidden;padding-top:3em;transition:all .23s}.planing-module .task-list-wrap .task-list{height:100%;overflow:auto}.planing-module .task-list-wrap .task-item-wrap{font-size:1em;padding-left:2em;position:relative;background-color:#fff;opacity:0;animation:fade-in-task-item .13s forwards;cursor:default;user-select:none;-moz-user-select:none}.planing-module .task-list-wrap .task-item-wrap:hover{background-color:#f9f9f9}.planing-module .task-list-wrap .task-item-wrap .check-box{position:absolute;left:0;top:0;width:13px;height:13px;border-radius:3px;margin-top:.8em;margin-left:.6em}.planing-module .task-list-wrap .task-item-wrap p{margin:0;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-size:.9em;line-height:2.7}.planing-module .task-list-wrap .task-item-wrap .date{position:absolute;right:0;top:0;font-size:.8em;line-height:3.2em;padding-right:.8em}.planing-module .add-task-wrap{position:absolute;z-index:100;bottom:0;width:100%;left:0;font-size:16px;transition:all .23s}.planing-module .add-task-wrap .add-task-input-wrap{border-top:1px solid #ededed;padding-right:2.5em;background-color:#fafafa}.planing-module .add-task-wrap .add-task-input-wrap .add-task-input{display:block;width:100%;box-sizing:border-box;outline:none;-webkit-appearance:none;border:none;height:2.5em;font-size:1em;color:#333;font-family:sans-serif;text-indent:1em;background-color:transparent}.planing-module .add-task-wrap .add-task-input-wrap .add-task-input::-webkit-input-placeholder{color:#ababab}.planing-module .add-task-wrap .add-task-input-wrap .add-task-input::-moz-placeholder{color:#ababab}.planing-module .add-task-wrap .add-task-input-wrap .add-task-input:-ms-placeholder{color:#ababab}.planing-module .add-task-wrap .add-task-input-wrap .send-task{position:absolute;top:0;right:0;width:2.5em;height:2.5em;border-top:1px solid #efeff0}.planing-module .add-task-wrap .add-task-input-wrap .send-task:before{content:"";position:absolute;top:50%;left:50%;border:6px solid transparent;border-left:9px solid #787878;margin-left:-3px;margin-top:-5px}.planing-module .add-task-wrap .add-task-input-wrap .send-task:hover{cursor:pointer}.planing-module .add-task-wrap .add-task-input-wrap .send-task:hover:before{animation:jump-send-task-button .2s}.planing-module .loading-wrap{opacity:0;position:absolute;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:hsla(0,0%,100%,.5);transition:opacity .33s}.planing-module .loading-wrap[data-visibility=hidden]{opacity:0}.planing-module .loading-wrap[data-visibility=visible]{opacity:1}.planing-module .loading-wrap .loading-dot{position:absolute;top:50%;left:50%;border-radius:50%;width:10px;height:10px;margin-top:-5px;margin-left:-5px;background-color:#8a2be2}@keyframes jump-send-task-button{0%{opacity:1;transform:translateX(0)}50%{opacity:0;transform:translateX(15px)}51%{opacity:0;transform:translateX(-15px)}to{opacity:1;transform:translateX(0)}}@keyframes loading-dot{0%{transform:translateY(0)}20%{transform:translateY(8px)}50%{transform:translateY(-8px)}to{transform:translateY(0)}}@keyframes show-planning-module{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes fade-in-task-item{0%{opacity:0;max-height:0;transform:translateY(-10px)}to{opacity:1;max-height:3em;transform:translateY(0)}}',''])},function(a){'use strict';function b(a,b){var d=a[1]||'',e=a[3];if(!e)return d;if(b&&'function'==typeof btoa){var f=c(e),g=e.sources.map(function(a){return'/*# sourceURL='+e.sourceRoot+a+' */'});return[d].concat(g).concat([f]).join('\n')}return[d].join('\n')}function c(a){var b=btoa(unescape(encodeURIComponent(JSON.stringify(a))));return'/*# '+('sourceMappingURL=data:application/json;charset=utf-8;base64,'+b)+' */'}a.exports=function(a){var c=[];return c.toString=function(){return this.map(function(c){var d=b(c,a);return c[2]?'@media '+c[2]+'{'+d+'}':d}).join('')},c.i=function(a,b){'string'==typeof a&&(a=[[null,a,'']]);for(var d,e={},f=0;f<this.length;f++)d=this[f][0],'number'==typeof d&&(e[d]=!0);for(f=0;f<a.length;f++){var g=a[f];'number'==typeof g[0]&&e[g[0]]||(b&&!g[2]?g[2]=b:b&&(g[2]='('+g[2]+') and ('+b+')'),c.push(g))}},c}},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.dealDateNumber=function(a){return a=''+a,a.charAt(1)?a:'0'+a}}])});